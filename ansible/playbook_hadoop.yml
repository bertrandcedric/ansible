---
# Gather facts to be able to use them in next plays
- hosts: all
  gather_facts: yes
  remote_user: deploy

#- hosts: all
#  gather_facts: no
#  remote_user: deploy
#  roles:
#    - { role: etc_hosts, machines: all }

- hosts: master
  gather_facts: no
  remote_user: deploy
  roles:
    - { role: jdk }
    - { role: hadoop/core, tags: [core] }
    - { role: hadoop/master, tags: [master] }

- hosts: slave
  gather_facts: no
  remote_user: deploy
  roles:
    - { role: jdk }
    - { role: hadoop/core, tags: [core] }
    - { role: hadoop/slave, tags: [slave] }


# Faire un format du cluster => hdfs namenode -format
# Demarrer le cluster (attention Ã  l'autorisation des clefs) => start-dfs.sh / start-yarn.sh
